<!-- page for a single routine -->
{% extends 'base.html' %}

{% block title %}PT Remix - Your routine{% endblock %}

{% block body %}
    <h1>Your Routine</h1>
        <div>
        {% for exercise in exercises %}
            <p>{{ exercise.name }}</p>
            <p>Description: {{ exercise.description }}</p>
            <p>Max reps: {{ exercise.max_reps }}</p>
            <p>Exercise ID: {{exercise.exercise_id }}</p>
            <p>Reps: {{ exercise.reps }}</p>
            <p>{{ exercise.img }}</p>
            <p>How did this exercise go?</p>
            <div><input type="submit" class="yay" id="yay-{{ exercise.exercise_id }}-{{ routine_id }}" value="Great!"></div>
            <div><input type="submit" class="meh" id="meh-{{ exercise.exercise_id }}-{{ routine_id }}" value="Okay"></div>
            <div><input type="submit" class="ouch" id="ouch-{{ exercise.exercise_id }}-{{ routine_id }}" value="Bad"></div>
        {% endfor %}
        </div>
    <script>
        const buttonyay = $('.yay');
        console.log(buttonyay);
        buttonyay.on('click', (evt) => {
            evt.preventDefault();
            console.log(evt.target.id);
            
            var id_string = evt.target.id;
            var string_array = id_string.split("-");
            const routine = string_array[2]
            
            $.post('/routine/' + routine, {'pain_level': 'positive', 'id': evt.target.id}, (res) => {
                console.log(res['status']);
            })
            // evt.target
            // on click, needs to update ExerciseRoutine.exercise_pain
            // change style of button happens in here
        });

        const buttonmeh = $('.meh');
        console.log(buttonmeh);
        buttonmeh.on('click', (evt) => {
            evt.preventDefault();
            console.log(evt.target.id);
            
            var id_string = evt.target.id;
            var string_array = id_string.split("-");
            // gets routine info from button id string
            const routine = string_array[2]
            
            $.post('/routine/' + routine, {'pain_level': 'neutral', 'id': evt.target.id}, (res) => {
                console.log(res['status']);
            })
            // evt.target
            // on click, needs to update ExerciseRoutine.exercise_pain
            // change style of button happens in here
        });

        const buttonouch = $('.ouch');
        console.log(buttonouch);
        buttonouch.on('click', (evt) => {
            evt.preventDefault();
            console.log(evt.target.id);
            
            var id_string = evt.target.id;
            var string_array = id_string.split("-");
            const routine = string_array[2]
            
            $.post('/routine/' + routine, {'pain_level': 'negative', 'id': evt.target.id}, (res) => {
                console.log(res['status']);
            })
            // evt.target
            // on click, needs to update ExerciseRoutine.exercise_pain
            // change style of button happens in here
        });
    </script>
    {% endblock %}